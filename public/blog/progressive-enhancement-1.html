<!doctype html>
<html lang="en">
<head>
  <meta name="viewport" content="initial-scale=1">
  <link rel="icon" type="image/png" href="/icons/icon-64.png">
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed">
  <title>Qubyte Codes - Progressive enhancement #1</title>
  <script src="/index.js" async></script>
  <link href="/main-dc224248f9cb3aa516a4fb5be13fc486.css" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#f1e7cd">
</head>
<body>
  <header class="top-header">
    <h1><a href="/">Qubyte Codes</a></h1>
    <nav>
      <ul>
        <li><a href="/">archive</a></li>
        <li><a href="/about">about</a></li>
      </ul>
    </nav>
  </header>
  <div class="content">
    <article>
      <header>
        <h2>Progressive enhancement #1</h2>
        <time datetime="2016-10-15T18:00Z">Sat Oct 15 2016</time>
      </header>
      <p>When I first put together the CSS for this blog I avoided a fixed header since
the header felt a bit large, and I didn&#39;t want to take up too much space which
could be used for content.</p>
<p>The solution is a header which shrinks as the reader scrolls down. This gives
back a little space, and maintains access to the navigation bar (which is a
part of the header). To make it look nice, the title animates between the
smaller and larger states using a CSS transition. The CSS looks something like:</p>
<pre><code class="lang-css"><span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1rem</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.smaller</span> <span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>I&#39;m a novice when it comes to CSS, so let me know if I&#39;m missing a trick!</p>
<p>The markup for the top header (which has not changed), looks like:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"top-header"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
</code></pre>
<p>To trigger the transition, a little JavaScript is needed to detect when a scroll
event occurs. When the page is not scrolled down the header has no additional
classes added. When the page is scrolled a class is added to make the header
<code>h1</code> text and margin smaller. When the page is scrolled down and then back to
the top, the header <code>h1</code> text returns to its original size.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> $header = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'.top-header'</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkHeaderSmallText</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.pageYOffset &gt; <span class="hljs-number">0</span>) {
    $header.classList.add(<span class="hljs-string">'smaller'</span>);
  } <span class="hljs-keyword">else</span> {
    $header.classList.remove(<span class="hljs-string">'smaller'</span>);
  }
}

<span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">'scroll'</span>, checkHeaderSmallText, <span class="hljs-literal">false</span>);

checkHeaderSmallText();
</code></pre>
<p>So why is this progressive? Most importantly, no markup (with the exception of
an added script tag in the head) has been added. Browsers with JavaScript
disabled or screen readers will interpret the site as they did before. If the
feature fails for any reason, or example if deferred scripts or <code>classList</code> are
not supported, then an error will be thrown and the header will fail to shrink.
Should CSS transitions not be supported, the header will immediately go from the
larger to the smaller state on scrolling. These failure modes are acceptable in
my opinion.</p>
<p>In the future I have a more elaborate header animation in mind. If you&#39;re
interested in such things, watch this space!</p>

    </article>
    <footer>
      <p>Feel like sharing? <a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?via=qubyte&amp;text=Qubyte%20Codes%20-%20Progressive%20enhancement%20%231&amp;url=https%3A%2F%2Fqubyte.codes%2Fblog%2Fprogressive-enhancement-1&amp;hashtags=CSS,JavaScript">Tweet this post!</a></p>
      <p>Comments or corrections? <a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?screen_name=qubyte">Send me a tweet!</a></p>
    </footer>
  </div>
</body>
</html>
