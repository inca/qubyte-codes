<!doctype html>
<html lang="en">
<head>
  <meta name="viewport" content="initial-scale=1">
  <link rel="icon" type="image/png" href="/icons/icon-64.png">
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed">
  <title>Qubyte Codes - Private methods for JS classes</title>
  <script src="/index.js" async></script>
  <link href="/main-d0691f7ca49d0f83f4d298a7ec093f87.css" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#f1e7cd">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@qubyte">
  <meta name="twitter:title" content="Private methods for JS classes">
  <meta name="twitter:description" content="This is a sequel to my post on private data for JS class instances. I show how to provide private methods for instances.">
</head>
<body>
  <header class="top-header">
    <h1><a href="/">Qubyte Codes</a></h1>
    <nav>
      <ul>
        <li><a href="/">archive</a></li>
        <li><a href="/about">about</a></li>
      </ul>
    </nav>
  </header>
  <div class="content">
    <article>
      <header>
        <h2>Private methods for JS classes</h2>
        <time datetime="2016-01-31T02:00Z">Sun Jan 31 2016</time>
        <span class="tags"><a href="/tags/JavaScript">#JavaScript</a> </span>
      </header>
      <p>This is a short companion to an
<a href="/blog/private-data-for-js-classes-with-weakmap">earlier article I wrote</a> on using <code>WeakMap</code> for
private data with JS classes. While private data belongs to instances, private methods can be shared
between instances of a class (just like its regular methods). An implementation using ES2015 modules
looks like:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setContent</span>(<span class="hljs-params">content</span>) </span>{
  <span class="hljs-keyword">const</span> text = <span class="hljs-built_in">document</span>.createTextNode(content);

  <span class="hljs-keyword">this</span>.el.appendChild(text);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Paragraph</span> </span>{
  <span class="hljs-keyword">constructor</span>(content) {
    <span class="hljs-keyword">this</span>.el = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'p'</span>);

    setContent.call(<span class="hljs-keyword">this</span>, content);
  }

  replace(content) {
    <span class="hljs-keyword">this</span>.el.innerHTML = <span class="hljs-string">''</span>;

    setContent.call(<span class="hljs-keyword">this</span>, content);
  }
}
</code></pre>
<p>This module exports a class which wraps a paragraph element (which is not a particularly useful
thing to do, but hopefully illustrates what I&#39;m about to say).</p>
<p>Each instance of <code>Paragraph</code> is constructed with some content. The one public method it has is
<code>replace</code>, which allows the content to be replaced. Both the <code>constructor</code> and the <code>replace</code> methods
set content, so rather than repeat the code that does that, the code is placed in the private method
<code>setContent</code>. <code>setContent</code> operates on a <code>Paragraph</code> instance passed in as the context by using
<code>call</code>. You could just as easily pass the instance in by using a parameter. I&#39;ve chosen the former
approach here to keep the difference between public and private methods to the minimum.</p>
<p>By virtue of the <code>setContent</code> method being declared outside of the class declaration, the class does
not make it available. You control which things you export from the module, so if the class doesn&#39;t
make <code>replace</code> available, and the module doesn&#39;t export it, then nothing outside the module has
access. Thus <code>setContent</code> is a private method.</p>
<p>For clarity, <code>replace</code> being public means that I can do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> paragraph = <span class="hljs-keyword">new</span> Paragraph(<span class="hljs-string">'hello'</span>);

<span class="hljs-comment">// replace is pubic, so we can use it.</span>
paragraph.replace(<span class="hljs-string">'goodbye'</span>);
</code></pre>
<p>And <code>setContent</code> being private means that I cannot do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> paragraph = <span class="hljs-keyword">new</span> Paragraph(<span class="hljs-string">'hello'</span>);

<span class="hljs-comment">// setContent is not a part of the Paragraph</span>
<span class="hljs-comment">// definition. We cannot do this.</span>
paragraph.setContent(<span class="hljs-string">'goodbye'</span>);
</code></pre>
<p>So there you have it. There&#39;s not a lot to the pattern really. Earlier module types and patterns
allow the same thing to be done. I recommend reading the <a target="_blank" rel="noopener" href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript">section on module patterns</a>
in Addy Osmani&#39;s excellent book <em>Learning JavaScript Design Patterns</em> if you want to know more (and
particularly the sub section on the <em>module pattern</em>).</p>

    </article>
    <footer>
      <p>Feel like sharing? <a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?via=qubyte&amp;text=Qubyte%20Codes%20-%20Private%20methods%20for%20JS%20classes&amp;url=https%3A%2F%2Fqubyte.codes%2Fblog%2Fprivate-methods-for-js-classes&amp;hashtags=JavaScript">Tweet this post!</a> or <a target="_blank" rel="noopener" href="web+mastodon://share?text=Qubyte%20Codes%20-%20Private%20methods%20for%20JS%20classes%20via%20%40qubyte%40mastodon.social%20%23JavaScript%20https%3A%2F%2Fqubyte.codes%2Fblog%2Fprivate-methods-for-js-classes">toot it!</a></p>
      <p>Comments or corrections? <a target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?screen_name=qubyte">Send me a tweet!</a> or <a target="_blank" rel="noopener" href="web+mastodon://share?text=%40qubyte%40mastodon.social">toot to me!</a></p>
    </footer>
  </div>
</body>
</html>
